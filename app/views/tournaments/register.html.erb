<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-4xl mx-auto px-4">
    <!-- 신청 헤더 -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
      <h1 class="text-2xl font-bold text-gray-800 mb-2">🏀 대회 신청하기</h1>
      <p class="text-gray-600"><%= @tournament.name %> 참가 신청</p>
    </div>
    
    <!-- 등록 폼 -->
    <%= form_with url: create_team_tournament_path(@tournament), local: true do |f| %>
      <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4">팀 정보</h2>
        
        <div class="space-y-4">
          <!-- 팀명 -->
          <div>
            <%= f.label :team_name, "팀명", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= f.text_field :team_name, required: true,
                class: "w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",
                placeholder: "예: Thunder Hawks" %>
          </div>
          
          <!-- 연락처 전화번호 -->
          <div>
            <%= f.label :contact_phone, "연락처 전화번호", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= f.text_field :contact_phone, required: true,
                class: "w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",
                placeholder: "010-1234-5678" %>
          </div>
          
          <!-- 연락처 이메일 -->
          <div>
            <%= f.label :contact_email, "연락처 이메일", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= f.email_field :contact_email, required: true,
                class: "w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",
                placeholder: "team@example.com" %>
          </div>
          
          <!-- 추가 메모 -->
          <div>
            <%= f.label :notes, "추가 메모 (선택사항)", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= f.text_area :notes, rows: 3,
                class: "w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",
                placeholder: "특이사항이나 요청사항을 입력하세요" %>
          </div>
        </div>
      </div>
      
      <!-- 팀원 명단 -->
      <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4">팀원 명단</h2>
        <p class="text-sm text-gray-600 mb-4">최소 <%= @tournament.players_per_team %>명의 선수를 등록해야 합니다.</p>
        
        <div id="players-list" class="space-y-3">
          <% (@tournament.players_per_team + 2).times do |i| %>
            <div class="player-entry flex gap-3">
              <div class="flex-1">
                <%= text_field_tag "players[][name]", nil,
                    class: "w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",
                    placeholder: "선수 이름" %>
              </div>
              <div class="w-32">
                <%= select_tag "players[][position]", 
                    options_for_select([["포지션", ""], ["가드", "가드"], ["포워드", "포워드"], ["센터", "센터"]]),
                    class: "w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" %>
              </div>
              <div class="w-20">
                <%= number_field_tag "players[][number]", nil,
                    class: "w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",
                    placeholder: "등번호",
                    min: 0,
                    max: 99 %>
              </div>
            </div>
          <% end %>
        </div>
        
        <button type="button" onclick="addPlayer()" class="mt-4 text-orange-600 hover:text-orange-700 text-sm font-medium">
          + 선수 추가
        </button>
      </div>
      
      <!-- 대회 정보 요약 -->
      <div class="bg-blue-50 rounded-lg p-6 mb-6">
        <h3 class="font-semibold text-gray-800 mb-3">대회 정보 요약</h3>
        <div class="space-y-2 text-sm text-gray-700">
          <p>📅 대회 일정: <%= @tournament.tournament_start_at&.strftime("%Y년 %m월 %d일") %></p>
          <p>📍 대회 장소: <%= @tournament.location_name %></p>
          <p>💰 참가비: <%= @tournament.entry_fee > 0 ? "#{number_with_delimiter(@tournament.entry_fee.to_i)}원" : "무료" %></p>
          <p>🏆 총 상금: <%= number_with_delimiter(@tournament.prize_pool.to_i) %>원</p>
        </div>
      </div>
      
      <!-- 동의 및 제출 -->
      <div class="bg-white rounded-lg shadow-lg p-6">
        <div class="mb-6">
          <label class="flex items-start">
            <%= check_box_tag "agree_terms", "1", false, required: true, class: "mt-1 mr-3" %>
            <span class="text-sm text-gray-700">
              대회 규정을 모두 읽고 이해했으며, 팀 대표로서 모든 규정을 준수할 것을 약속합니다.
            </span>
          </label>
        </div>
        
        <div class="flex justify-between">
          <%= link_to "취소", tournament_path(@tournament), 
              class: "bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-3 rounded-lg transition duration-300" %>
          <%= f.submit "대회 신청 완료", 
              class: "bg-orange-500 hover:bg-orange-600 text-white font-bold px-8 py-3 rounded-lg transition duration-300" %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script>
function addPlayer() {
  const playersList = document.getElementById('players-list');
  const newEntry = document.createElement('div');
  newEntry.className = 'player-entry flex gap-3';
  newEntry.innerHTML = `
    <div class="flex-1">
      <input type="text" name="players[][name]" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="선수 이름">
    </div>
    <div class="w-32">
      <select name="players[][position]" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
        <option value="">포지션</option>
        <option value="가드">가드</option>
        <option value="포워드">포워드</option>
        <option value="센터">센터</option>
      </select>
    </div>
    <div class="w-20">
      <input type="number" name="players[][number]" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="등번호" min="0" max="99">
    </div>
  `;
  playersList.appendChild(newEntry);
}
</script>