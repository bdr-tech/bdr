<% content_for :title, "ìƒˆ ê²Œì‹œê¸€ ì‘ì„± - BDR ì»¤ë®¤ë‹ˆí‹°" %>

<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-4xl mx-auto px-4">
    <!-- í—¤ë” -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <div class="flex justify-between items-center">
        <h1 class="text-2xl font-bold text-gray-800">âœï¸ ìƒˆ ê²Œì‹œê¸€ ì‘ì„±</h1>
        <%= link_to "â† ëª©ë¡ìœ¼ë¡œ", community_path, class: "text-gray-600 hover:text-gray-800 transition duration-300" %>
      </div>
    </div>

    <!-- ì‘ì„± í¼ -->
    <div class="bg-white rounded-lg shadow-lg p-8">
      <%= form_with model: @post, local: true, class: "space-y-6" do |form| %>
        <% if @post.errors.any? %>
          <div class="bg-red-50 border border-red-200 rounded-lg p-4">
            <h3 class="text-red-800 font-semibold mb-2">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:</h3>
            <ul class="text-red-700 text-sm space-y-1">
              <% @post.errors.full_messages.each do |message| %>
                <li>â€¢ <%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
        <div>
          <%= form.label :category, "ê²Œì‹œíŒ ì„ íƒ", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <% Post::CATEGORIES.each do |category, description| %>
              <label class="category-option cursor-pointer">
                <%= form.radio_button :category, category, 
                      value: category,
                      checked: (params[:category] == category),
                      class: "sr-only category-radio" %>
                <div class="category-card border-2 border-gray-200 rounded-lg p-4 text-center hover:border-orange-300 transition-all duration-300">
                  <div class="text-2xl mb-2"><%= Post.new(category: category).category_icon %></div>
                  <div class="font-semibold text-gray-800 text-sm"><%= category %></div>
                  <div class="text-xs text-gray-600 mt-1"><%= description %></div>
                </div>
              </label>
            <% end %>
          </div>
        </div>

        <!-- ì œëª© -->
        <div>
          <%= form.label :title, "ì œëª©", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_field :title, 
                class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",
                placeholder: "ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš” (2-100ì)" %>
        </div>

        <!-- ë‚´ìš© -->
        <div>
          <%= form.label :content, "ë‚´ìš©", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_area :content, rows: 12,
                class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",
                placeholder: "ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 5ì ì´ìƒ)" %>
        </div>

        <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <%= form.label :image1, "ì²« ë²ˆì§¸ ì´ë¯¸ì§€", class: "block text-sm font-medium text-gray-700 mb-2" %>
            <%= form.url_field :image1,
                  class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",
                  placeholder: "ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš” (ì„ íƒì‚¬í•­)" %>
            <p class="text-xs text-gray-500 mt-1">ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: https://example.com/image.jpg)</p>
          </div>
          
          <div>
            <%= form.label :image2, "ë‘ ë²ˆì§¸ ì´ë¯¸ì§€", class: "block text-sm font-medium text-gray-700 mb-2" %>
            <%= form.url_field :image2,
                  class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",
                  placeholder: "ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš” (ì„ íƒì‚¬í•­)" %>
            <p class="text-xs text-gray-500 mt-1">ìµœëŒ€ 2ì¥ê¹Œì§€ ì²¨ë¶€ ê°€ëŠ¥í•©ë‹ˆë‹¤</p>
          </div>
        </div>

        <!-- ì‘ì„± ì•ˆë‚´ -->
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
          <h3 class="font-semibold text-blue-800 mb-2">ğŸ“ ì‘ì„± ê°€ì´ë“œ</h3>
          <ul class="text-blue-700 text-sm space-y-1">
            <li>â€¢ ì„œë¡œ ì¡´ì¤‘í•˜ëŠ” ë§ˆìŒìœ¼ë¡œ ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”</li>
            <li>â€¢ ê°œì¸ì •ë³´ë‚˜ ì—°ë½ì²˜ëŠ” ê³µê°œí•˜ì§€ ë§ˆì„¸ìš”</li>
            <li>â€¢ ì¤‘ê³ ê±°ë˜ ì‹œ ì•ˆì „í•œ ê±°ë˜ë¥¼ ìœ„í•´ ì‹ ì¤‘íˆ ê²°ì •í•˜ì„¸ìš”</li>
            <li>â€¢ ë¶€ì ì ˆí•œ ë‚´ìš©ì€ ê´€ë¦¬ìì— ì˜í•´ ì‚­ì œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
          </ul>
        </div>

        <!-- ë²„íŠ¼ -->
        <div class="flex justify-between pt-6">
          <%= link_to "ì·¨ì†Œ", community_path, class: "px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-300" %>
          <%= form.submit "ê²Œì‹œê¸€ ì‘ì„±", 
                class: "px-8 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold transition duration-300 transform hover:scale-105" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // ì¹´í…Œê³ ë¦¬ ì„ íƒ ê¸°ëŠ¥
  document.querySelectorAll('.category-option').forEach(option => {
    option.addEventListener('click', function() {
      // ëª¨ë“  ì¹´í…Œê³ ë¦¬ ì˜µì…˜ ì´ˆê¸°í™”
      document.querySelectorAll('.category-card').forEach(card => {
        card.classList.remove('border-orange-500', 'bg-orange-50');
        card.classList.add('border-gray-200');
      });
      
      // ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ í™œì„±í™”
      const card = this.querySelector('.category-card');
      card.classList.remove('border-gray-200');
      card.classList.add('border-orange-500', 'bg-orange-50');
      
      // ë¼ë””ì˜¤ ë²„íŠ¼ ì²´í¬
      this.querySelector('.category-radio').checked = true;
    });
  });
  
  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„ íƒëœ ì¹´í…Œê³ ë¦¬ í‘œì‹œ
  const checkedRadio = document.querySelector('.category-radio:checked');
  if (checkedRadio) {
    const card = checkedRadio.parentElement.querySelector('.category-card');
    card.classList.remove('border-gray-200');
    card.classList.add('border-orange-500', 'bg-orange-50');
  }
});
</script>