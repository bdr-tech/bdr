<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <style>
      body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
      .container { max-width: 600px; margin: 0 auto; padding: 20px; }
      .header { background-color: #28a745; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }
      .content { background-color: #f8f9fa; padding: 30px; border-radius: 0 0 8px 8px; }
      .button { display: inline-block; padding: 12px 24px; background-color: #28a745; color: white; text-decoration: none; border-radius: 4px; margin: 20px 0; }
      .info-box { background-color: white; padding: 20px; border-radius: 8px; margin: 20px 0; border: 1px solid #e0e0e0; }
      .receipt { background-color: #e8f5e9; padding: 20px; border-radius: 8px; margin: 20px 0; border: 1px solid #4caf50; }
      .footer { text-align: center; margin-top: 30px; color: #666; font-size: 14px; }
    </style>
  </head>
  
  <body>
    <div class="container">
      <div class="header">
        <h1>✅ 결제가 완료되었습니다!</h1>
      </div>
      
      <div class="content">
        <h2>안녕하세요, <%= @user.display_name %>님!</h2>
        
        <p>결제가 성공적으로 완료되어 경기 참가가 <strong>확정</strong>되었습니다.</p>
        
        <div class="receipt">
          <h3 style="margin-top: 0;">💳 결제 영수증</h3>
          <p>
            <strong>결제 번호:</strong> <%= @payment.id %><br>
            <strong>결제 일시:</strong> <%= @payment.paid_at&.strftime('%Y년 %m월 %d일 %H:%M') || Time.current.strftime('%Y년 %m월 %d일 %H:%M') %><br>
            <strong>결제 금액:</strong> <%= number_to_currency(@payment.amount) %><br>
            <strong>결제 방법:</strong> <%= @payment.payment_method || '토스페이먼츠' %>
          </p>
        </div>
        
        <div class="info-box">
          <h3>경기 정보</h3>
          <p>
            <strong>경기명:</strong> <%= @game.title %><br>
            <strong>일시:</strong> <%= @game.start_time.strftime('%Y년 %m월 %d일 %H:%M') %><br>
            <strong>장소:</strong> <%= @game.venue_name %><br>
            <strong>주소:</strong> <%= @game.venue_address %><br>
            <strong>호스트:</strong> <%= @game.organizer.display_name %>
          </p>
        </div>
        
        <div style="background-color: #d4edda; padding: 15px; border-radius: 8px; border: 1px solid #c3e6cb;">
          <h3 style="color: #155724; margin-top: 0;">📅 캘린더에 추가하세요!</h3>
          <p style="color: #155724; margin-bottom: 0;">
            경기 일정을 잊지 않도록 캘린더에 추가하는 것을 추천드립니다.<br>
            경기 24시간 전에 리마인더 이메일을 보내드릴 예정입니다.
          </p>
        </div>
        
        <h3>환불 정책 안내</h3>
        <ul>
          <li>경기 7일 전: 100% 환불</li>
          <li>경기 3-7일 전: 80% 환불</li>
          <li>경기 1-3일 전: 50% 환불</li>
          <li>경기 24시간 이내: 환불 불가</li>
        </ul>
        
        <center>
          <%= link_to "홈으로 가기", root_url, class: "button" %>
        </center>
        
        <p style="text-align: center; color: #666; font-size: 14px;">
          경기 당일 즐거운 시간 보내시길 바랍니다! 🏀
        </p>
      </div>
      
      <div class="footer">
        <p>이 메일은 BDR 플랫폼에서 자동으로 발송된 메일입니다.</p>
        <p>문의사항이 있으시면 support@bdr-platform.com으로 연락주세요.</p>
        <p>&copy; <%= Date.current.year %> BDR Platform. All rights reserved.</p>
      </div>
    </div>
  </body>
</html>