<div class="container mx-auto px-4 py-8 max-w-7xl">
  <!-- Header -->
  <div class="mb-8">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-3xl font-bold text-gray-900"><%= @season.season_name %> 시즌</h1>
        <p class="text-gray-600 mt-1">
          <%= @season.season_start.strftime("%Y년 %m월 %d일") %> - 
          <%= @season.season_end.strftime("%Y년 %m월 %d일") %>
        </p>
      </div>
      <%= link_to "통계 대시보드로 돌아가기", stats_path, 
          class: "text-blue-600 hover:text-blue-800" %>
    </div>
  </div>

  <!-- Season Overview -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div class="bg-white rounded-lg shadow p-6">
      <h3 class="text-sm font-medium text-gray-500 mb-2">경기 기록</h3>
      <p class="text-3xl font-bold text-gray-900"><%= @season.games_played %></p>
      <p class="text-sm text-gray-600 mt-1">
        <%= @season.wins %>승 <%= @season.losses %>패 
        (<%= @season.games_played > 0 ? (@season.wins.to_f / @season.games_played * 100).round(1) : 0 %>%)
      </p>
    </div>
    
    <div class="bg-white rounded-lg shadow p-6">
      <h3 class="text-sm font-medium text-gray-500 mb-2">평균 득점</h3>
      <p class="text-3xl font-bold text-blue-600"><%= @season.points_per_game.round(1) %></p>
      <p class="text-sm text-gray-600 mt-1">PPG</p>
    </div>
    
    <div class="bg-white rounded-lg shadow p-6">
      <h3 class="text-sm font-medium text-gray-500 mb-2">평균 리바운드</h3>
      <p class="text-3xl font-bold text-green-600"><%= @season.rebounds_per_game.round(1) %></p>
      <p class="text-sm text-gray-600 mt-1">RPG</p>
    </div>
    
    <div class="bg-white rounded-lg shadow p-6">
      <h3 class="text-sm font-medium text-gray-500 mb-2">평균 어시스트</h3>
      <p class="text-3xl font-bold text-purple-600"><%= @season.assists_per_game.round(1) %></p>
      <p class="text-sm text-gray-600 mt-1">APG</p>
    </div>
  </div>

  <!-- Detailed Stats -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
    <!-- Shooting Stats -->
    <div class="bg-white rounded-lg shadow-lg p-6">
      <h2 class="text-xl font-bold text-gray-900 mb-4">슈팅 통계</h2>
      <div class="space-y-4">
        <div>
          <div class="flex justify-between items-center mb-1">
            <span class="text-sm text-gray-600">필드골</span>
            <span class="text-sm font-semibold"><%= @season.field_goal_percentage.round(1) %>%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-blue-600 h-2 rounded-full" style="width: <%= @season.field_goal_percentage %>%"></div>
          </div>
        </div>
        
        <div>
          <div class="flex justify-between items-center mb-1">
            <span class="text-sm text-gray-600">3점슛</span>
            <span class="text-sm font-semibold"><%= @season.three_point_percentage.round(1) %>%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-red-600 h-2 rounded-full" style="width: <%= @season.three_point_percentage %>%"></div>
          </div>
        </div>
        
        <div>
          <div class="flex justify-between items-center mb-1">
            <span class="text-sm text-gray-600">자유투</span>
            <span class="text-sm font-semibold"><%= @season.free_throw_percentage.round(1) %>%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-green-600 h-2 rounded-full" style="width: <%= @season.free_throw_percentage %>%"></div>
          </div>
        </div>
        
        <div class="pt-4 border-t">
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-600">TS% (진짜 슈팅 효율)</span>
            <span class="text-sm font-semibold"><%= @season.true_shooting_percentage.round(1) %>%</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Other Stats -->
    <div class="bg-white rounded-lg shadow-lg p-6">
      <h2 class="text-xl font-bold text-gray-900 mb-4">기타 통계</h2>
      <div class="space-y-3">
        <div class="flex justify-between">
          <span class="text-sm text-gray-600">평균 출전시간</span>
          <span class="text-sm font-semibold"><%= @season.minutes_per_game.round(1) %>분</span>
        </div>
        <div class="flex justify-between">
          <span class="text-sm text-gray-600">평균 스틸</span>
          <span class="text-sm font-semibold"><%= @season.steals_per_game.round(1) %></span>
        </div>
        <div class="flex justify-between">
          <span class="text-sm text-gray-600">평균 블록</span>
          <span class="text-sm font-semibold"><%= @season.blocks_per_game.round(1) %></span>
        </div>
        <div class="flex justify-between">
          <span class="text-sm text-gray-600">평균 턴오버</span>
          <span class="text-sm font-semibold"><%= @season.turnovers_per_game.round(1) %></span>
        </div>
        <div class="flex justify-between pt-3 border-t">
          <span class="text-sm text-gray-600">A/TO 비율</span>
          <span class="text-sm font-semibold">
            <%= @season.turnovers_per_game > 0 ? 
                (@season.assists_per_game / @season.turnovers_per_game).round(2) : 
                @season.assists_per_game.round(1) %>
          </span>
        </div>
      </div>
    </div>

    <!-- Monthly Breakdown -->
    <div class="bg-white rounded-lg shadow-lg p-6">
      <h2 class="text-xl font-bold text-gray-900 mb-4">월별 추이</h2>
      <% if @monthly_breakdown.any? %>
        <div class="space-y-3">
          <% @monthly_breakdown.each do |month, stats| %>
            <div class="border-b pb-2">
              <p class="text-sm font-medium text-gray-700">
                <%= month.strftime("%Y년 %m월") %>
              </p>
              <div class="flex justify-between text-xs text-gray-600 mt-1">
                <span><%= stats[:games] %>경기</span>
                <span><%= stats[:ppg].round(1) %> PPG</span>
                <span><%= stats[:rpg].round(1) %> RPG</span>
                <span><%= stats[:apg].round(1) %> APG</span>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="text-gray-500">월별 데이터가 없습니다.</p>
      <% end %>
    </div>
  </div>

  <!-- Season Games -->
  <div class="bg-white rounded-lg shadow-lg overflow-hidden">
    <div class="px-6 py-4 border-b">
      <h2 class="text-xl font-bold text-gray-900">시즌 경기 기록</h2>
    </div>
    
    <% if @season_games.any? %>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">날짜</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">경기장</th>
              <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase">PTS</th>
              <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase">REB</th>
              <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase">AST</th>
              <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase">STL</th>
              <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase">BLK</th>
              <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase">FG%</th>
              <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase">3P%</th>
              <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase">+/-</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200">
            <% @season_games.each do |stat| %>
              <tr class="hover:bg-gray-50">
                <td class="px-4 py-3 text-sm">
                  <%= stat.game.scheduled_at.strftime("%m/%d") %>
                </td>
                <td class="px-4 py-3 text-sm">
                  <%= link_to stat.game.court.name, court_path(stat.game.court), 
                      class: "text-blue-600 hover:text-blue-800" %>
                </td>
                <td class="px-4 py-3 text-sm text-center font-bold">
                  <%= stat.points %>
                  <% if stat.double_double? %>
                    <span class="text-xs text-green-600">DD</span>
                  <% elsif stat.triple_double? %>
                    <span class="text-xs text-purple-600">TD</span>
                  <% end %>
                </td>
                <td class="px-4 py-3 text-sm text-center"><%= stat.total_rebounds %></td>
                <td class="px-4 py-3 text-sm text-center"><%= stat.assists %></td>
                <td class="px-4 py-3 text-sm text-center"><%= stat.steals %></td>
                <td class="px-4 py-3 text-sm text-center"><%= stat.blocks %></td>
                <td class="px-4 py-3 text-sm text-center"><%= stat.field_goal_percentage %>%</td>
                <td class="px-4 py-3 text-sm text-center"><%= stat.three_point_percentage %>%</td>
                <td class="px-4 py-3 text-sm text-center">
                  <span class="<%= stat.plus_minus >= 0 ? 'text-green-600' : 'text-red-600' %>">
                    <%= stat.plus_minus > 0 ? '+' : '' %><%= stat.plus_minus %>
                  </span>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <div class="text-center py-12">
        <p class="text-gray-500">시즌 경기 기록이 없습니다.</p>
      </div>
    <% end %>
  </div>
</div>