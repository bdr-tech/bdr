<% content_for :title, "ÏΩîÌä∏ Í¥ÄÎ¶¨ - BDR Í¥ÄÎ¶¨Ïûê" %>

    <!-- ÌéòÏù¥ÏßÄ Ï†úÎ™© -->
    <div class="mb-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-2">üèÄ ÏΩîÌä∏ Í¥ÄÎ¶¨</h2>
      <p class="text-gray-600">Îì±Î°ùÎêú ÏΩîÌä∏Îì§ÏùÑ Í¥ÄÎ¶¨ÌïòÍ≥† Î™®ÎãàÌÑ∞ÎßÅÌïòÏÑ∏Ïöî</p>
    </div>

    <!-- ÏΩîÌä∏ Ï∂îÍ∞Ä Î≤ÑÌäº -->
    <div class="mb-6">
      <%= link_to "ÏÉà ÏΩîÌä∏ Ï∂îÍ∞Ä", new_admin_court_path, class: "bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-300" %>
    </div>

    <!-- ÌïÑÌÑ∞ Î∞è Í≤ÄÏÉâ -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <%= form_with url: admin_courts_path, method: :get, local: true, class: "flex flex-wrap gap-4 items-end" do |form| %>
        <div class="flex-1 min-w-64">
          <%= form.text_field :search, placeholder: "ÏΩîÌä∏Î™Ö, Ï£ºÏÜå Í≤ÄÏÉâ", 
                              value: params[:search], 
                              class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" %>
        </div>
        <div>
          <%= form.select :status, 
                          options_for_select([
                            ['Ï†ÑÏ≤¥ ÏÉÅÌÉú', ''],
                            ['ÌôúÏÑ±', 'active'],
                            ['ÎπÑÌôúÏÑ±', 'inactive'],
                            ['Ï†êÍ≤ÄÏ§ë', 'maintenance']
                          ], params[:status]), 
                          {}, 
                          { class: "px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" } %>
        </div>
        <div class="flex gap-2">
          <%= form.submit "Í≤ÄÏÉâ", class: "bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-300" %>
          <%= link_to "Ï¥àÍ∏∞Ìôî", admin_courts_path, class: "bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition duration-300" %>
        </div>
      <% end %>
    </div>

    <!-- ÏΩîÌä∏ Î™©Î°ù -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ÏΩîÌä∏ Ï†ïÎ≥¥</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ÏÉÅÌÉú</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ÏãúÏÑ§</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ïù¥Ïö© ÌÜµÍ≥Ñ</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Îì±Î°ùÏùº</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Í¥ÄÎ¶¨</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% if @courts && @courts.any? %>
              <% @courts.each do |court| %>
                <tr class="hover:bg-gray-50">
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center">
                      <div class="flex-shrink-0 h-10 w-10">
                        <div class="h-10 w-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-bold">
                          üèÄ
                        </div>
                      </div>
                      <div class="ml-4">
                        <div class="text-sm font-medium text-gray-900">
                          <%= court.name %>
                        </div>
                        <div class="text-sm text-gray-500">
                          <%= court.address %>
                        </div>
                      </div>
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <% case court.status %>
                    <% when 'active' %>
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        ÌôúÏÑ±
                      </span>
                    <% when 'inactive' %>
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                        ÎπÑÌôúÏÑ±
                      </span>
                    <% when 'maintenance' %>
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                        Ï†êÍ≤ÄÏ§ë
                      </span>
                    <% end %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <div>ÏΩîÌä∏ Ïàò: <%= court.court_count || 0 %>Í∞ú</div>
                    <div class="text-xs text-gray-400">
                      <%= court.indoor? ? 'Ïã§ÎÇ¥' : 'Ïã§Ïô∏' %>
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <div>Ï¥ù Í≤ΩÍ∏∞: <%= court.games.count %>Í±¥</div>
                    <div class="text-xs text-gray-400">
                      Ïù¥Î≤à Îã¨: <%= court.games.where(created_at: Date.current.beginning_of_month..Date.current.end_of_month).count %>Í±¥
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <%= court.created_at.strftime("%Y-%m-%d") %>
                    <div class="text-xs text-gray-400">
                      <%= time_ago_in_words(court.created_at) %> Ï†Ñ
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                    <div class="flex space-x-2">
                      <%= link_to "ÏàòÏ†ï", edit_admin_court_path(court), class: "text-blue-600 hover:text-blue-800" %>
                      
                      <% if court.status == 'active' %>
                        <%= form_with url: admin_court_action_path(court), method: :post, local: true, class: "inline" do |f| %>
                          <%= f.hidden_field :action_type, value: 'deactivate' %>
                          <%= f.submit "ÎπÑÌôúÏÑ±Ìôî", class: "bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs", 
                                       data: { confirm: "Ïù¥ ÏΩîÌä∏Î•º ÎπÑÌôúÏÑ±ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?" } %>
                        <% end %>
                      <% else %>
                        <%= form_with url: admin_court_action_path(court), method: :post, local: true, class: "inline" do |f| %>
                          <%= f.hidden_field :action_type, value: 'activate' %>
                          <%= f.submit "ÌôúÏÑ±Ìôî", class: "bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded text-xs" %>
                        <% end %>
                      <% end %>
                    </div>
                  </td>
                </tr>
              <% end %>
            <% else %>
              <tr>
                <td colspan="6" class="px-6 py-4 text-center text-gray-500">
                  Îì±Î°ùÎêú ÏΩîÌä∏Í∞Ä ÏóÜÏäµÎãàÎã§.
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <% if @courts && @courts.respond_to?(:current_page) && @courts.any? %>
      <!-- ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò -->
      <div class="mt-6 flex justify-center">
        <%= paginate @courts %>
      </div>
    <% end %>
